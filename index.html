<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>StarFlip - Home</title>
<style>
  /* Your entire CSS pasted here */
  body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(-45deg, #0f0f0f, #120043, #320054, #000f2f);
      background-size: 400% 400%;
      animation: animateBackground 20s ease infinite;
      color: white;
      text-align: center;
  }
  @keyframes animateBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
  }
  header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(20, 20, 30, 0.7);
      padding: 1em 2em;
      box-shadow: 0 4px 10px rgba(0,0,0,0.6);
      position: sticky;
      top: 0;
      z-index: 100;
  }
  .logo-container {
      display: flex;
      align-items: center;
  }
  .logo {
      height: 50px;
  }
  nav a, .connect-wallet {
      margin: 0 10px;
      color: #00ffff;
      text-decoration: none;
      font-weight: bold;
      background: rgba(255,255,255,0.05);
      border: 1px solid #00ffff;
      padding: 8px 16px;
      border-radius: 8px;
      backdrop-filter: blur(8px);
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(0,255,255,0.3);
  }
  nav a:hover, .connect-wallet:hover {
      background: #00ffff;
      color: #000;
      transform: scale(1.05);
  }
  .center {
      margin-top: 4em;
  }
  .brand {
      background: linear-gradient(90deg, #00ffff, #ff00ff);
      -webkit-background-clip: text;
      color: transparent;
      font-weight: bold;
      font-size: 3em;
      animation: pulse 3s infinite alternate;
  }
  @keyframes pulse {
      0% { filter: drop-shadow(0 0 5px #00ffff);}
      100% { filter: drop-shadow(0 0 20px #ff00ff);}
  }
  .game-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5em;
      margin-top: 2em;
  }
  .game-btn {
      padding: 1em 2em;
      background: rgba(255,255,255,0.05);
      border: 2px solid #00ffff;
      border-radius: 12px;
      color: #00ffff;
      font-size: 1.2em;
      text-decoration: none;
      font-weight: bold;
      backdrop-filter: blur(6px);
      transition: all 0.4s ease;
      box-shadow: 0 0 15px rgba(0,255,255,0.3);
  }
  .game-btn.secondary {
      border-color: #ff00ff;
      color: #ff00ff;
      box-shadow: 0 0 15px rgba(255,0,255,0.3);
  }
  .game-btn:hover {
      background: #00ffff;
      color: black;
      transform: scale(1.08);
  }
  .game-btn.secondary:hover {
      background: #ff00ff;
      color: black;
  }
  @media (max-width: 600px) {
      .game-buttons {
          flex-direction: column;
      }
      nav {
          flex-wrap: wrap;
          justify-content: center;
          gap: 0.5em;
      }
      .logo {
          height: 40px;
      }
  }
  
  /* New deposit styles */
  .deposit-section {
    margin: 3em auto;
    max-width: 320px;
    background: rgba(255 255 255 / 0.1);
    border-radius: 16px;
    padding: 1.5em;
    box-shadow: 0 0 20px #00ffffaa;
    backdrop-filter: blur(12px);
  }
  .deposit-section h2 {
    margin-bottom: 1em;
    font-weight: bold;
    font-size: 1.5em;
    color: #00ffff;
    text-shadow: 0 0 10px #00ffff;
  }
  #deposit-form label {
    display: block;
    text-align: left;
    margin-top: 1em;
    margin-bottom: 0.3em;
    font-weight: 600;
    color: #aaffff;
  }
  #deposit-form select, 
  #deposit-form input {
    width: 100%;
    padding: 0.6em;
    border-radius: 8px;
    border: none;
    font-size: 1em;
    background: rgba(255 255 255 / 0.1);
    color: white;
    box-shadow: inset 0 0 6px #00ffff;
    transition: box-shadow 0.3s ease;
  }
  #deposit-form select:focus,
  #deposit-form input:focus {
    outline: none;
    box-shadow: 0 0 12px #00ffff;
    background: rgba(0 255 255 / 0.15);
  }
  .deposit-btn {
    margin-top: 1.5em;
    width: 100%;
    padding: 0.8em;
    font-size: 1.2em;
    font-weight: bold;
    color: black;
    background: #00ffff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 0 20px #00ffff;
    transition: background 0.3s ease, transform 0.3s ease;
  }
  .deposit-btn:hover {
    background: #00bbbb;
    transform: scale(1.05);
  }
  .deposit-message {
    margin-top: 1em;
    font-weight: 700;
    min-height: 1.2em;
  }
  .balance-amount {
    font-weight: bold;
    font-size: 1.8em;
    color: #00ffff;
    text-shadow: 0 0 15px #00ffff;
  }
</style>
</head>
<body>
<header>
  <div class="logo-container">
    <img src="logo.png" alt="StarFlip Logo" class="logo" />
    <h1 class="brand">StarFlip</h1>
  </div>
  <nav>
    <a href="#" id="logout-btn" style="display:none;">Logout</a>
    <a href="#" id="login-btn">Login</a>
  </nav>
</header>

<main class="center">
  <h2 class="brand">Welcome to StarFlip ðŸš€</h2>
  <p>Your balance: <span id="user-balance" class="balance-amount">$0.00</span></p>

  <section class="deposit-section">
    <h2>Deposit Crypto</h2>
    <form id="deposit-form">
      <label for="crypto-select">Select Crypto:</label>
      <select id="crypto-select" required>
        <option value="">--Choose--</option>
        <option value="LTC">Litecoin (LTC)</option>
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="SOL">Solana (SOL)</option>
      </select>

      <label for="deposit-amount">Amount ($):</label>
      <input type="number" id="deposit-amount" min="1" placeholder="Amount in USD" required />

      <button type="submit" class="deposit-btn">Deposit Now</button>
    </form>
    <div id="deposit-message" class="deposit-message"></div>
  </section>

  <section class="game-buttons">
    <a href="mines.html" id="play-mines" class="game-btn">Play Mines</a>
    <a href="towers.html" id="play-towers" class="game-btn secondary">Play Towers</a>
  </section>
</main>

<script type="module">
  // Mock Firebase for demo: Replace with your firebase imports & config
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
  import { getAuth, onAuthStateChanged, signInAnonymously, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";

  const firebaseConfig = {
    // your config here
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  let balance = 0;

  const userBalanceEl = document.getElementById('user-balance');
  const depositForm = document.getElementById('deposit-form');
  const depositMessage = document.getElementById('deposit-message');
  const logoutBtn = document.getElementById('logout-btn');
  const loginBtn = document.getElementById('login-btn');

  async function loadBalance(uid) {
    const userDoc = await getDoc(doc(db, "users", uid));
    if (userDoc.exists()) {
      balance = userDoc.data().balance || 0;
    } else {
      balance = 0;
      await setDoc(doc(db, "users", uid), { balance: 0 });
    }
    userBalanceEl.textContent = `$${balance.toFixed(2)}`;
  }

  depositForm.addEventListener('submit', async e => {
    e.preventDefault();
    const crypto = document.getElementById('crypto-select').value;
    const amount = parseFloat(document.getElementById('deposit-amount').value);

    if (!crypto || isNaN(amount) || amount <= 0) {
      depositMessage.textContent = 'Please select crypto and enter a valid amount.';
      depositMessage.style.color = 'red';
      return;
    }

    depositMessage.textContent = `Processing your ${crypto} deposit of $${amount.toFixed(2)}... ðŸš€`;
    depositMessage.style.color = '#00ffff';

    // Simulate async deposit delay
    setTimeout(async () => {
      balance += amount;
      await updateDoc(doc(db, "users", auth.currentUser.uid), { balance });
      userBalanceEl.textContent = `$${balance.toFixed(2)}`;
      depositMessage.textContent = `Deposit successful! Your new balance is $${balance.toFixed(2)}.`;
      depositMessage.style.color = '#ff00ff';
      depositForm.reset();
    }, 2000);
  });

  onAuthStateChanged(auth, async user => {
    if (user) {
      logoutBtn.style.display = 'inline-block';
      loginBtn.style.display = 'none';
      await loadBalance(user.uid);
      sessionStorage.setItem('userBalance', balance.toFixed(2));
      sessionStorage.setItem('userID', user.uid);
    } else {
      logoutBtn.style.display = 'none';
      loginBtn.style.display = 'inline-block';
      userBalanceEl.textContent = '$0.00';
      sessionStorage.clear();
    }
  });

  logoutBtn.onclick = () => signOut(auth);
  loginBtn.onclick = () => signInAnonymously(auth);

  // Pass balance & userID to other games using sessionStorage
  document.querySelectorAll('.game-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      sessionStorage.setItem('userBalance', balance.toFixed(2));
      sessionStorage.setItem('userID', auth.currentUser ? auth.currentUser.uid : '');
    });
  });
</script>
</body>
</html>
